# ==========================================
# Tawatch Backend Environment Variables
# ==========================================
# Example environment file for Docker deployment.
# Copy this file to .env and customize values for your environment.
# DO NOT commit .env file with real secrets to Git.

# ==========================================
# APPLICATION SETTINGS
# ==========================================

# Application name used in logs and service discovery
APP_NAME=tawatch

# Active Spring profile for environment-specific configuration
SPRING_PROFILES_ACTIVE=docker

# ==========================================
# SERVER CONFIGURATION
# ==========================================

# Host port mapping (for Docker)
HOST_PORT=8080

# Internal server port (should match HOST_PORT for Docker)
SERVER_PORT=8080

# Base context path for API endpoints
SERVER_CONTEXT_PATH=/api/tawatch

# Maximum number of worker threads
SERVER_MAX_THREADS=200

# Minimum number of worker threads
SERVER_MIN_THREADS=20

# Connection timeout in milliseconds
SERVER_CONNECTION_TIMEOUT=5000

# Maximum queue length for incoming connection requests
SERVER_ACCEPT_COUNT=100

# Maximum number of connections
SERVER_MAX_CONNECTIONS=1000

# ==========================================
# DATABASE CONFIGURATION (MySQL)
# ==========================================

# Database host (must match the Docker Compose service name, default: 'mysql')
DB_HOST=mysql

# Database port (MySQL default is 3306)
DB_PORT=3306

# Database external port (MySQL default is 3306)
DB_EXTERNAL_PORT=3306

# Database name
DB_NAME=tawatch_db

# Database username
DB_USERNAME=tawatch_user

# Database password (CHANGE THIS in production!)
DB_PASSWORD=password

# Database root password (CHANGE THIS in production!)
DB_ROOT_PASSWORD=password

# Database timezone (Asia/Ho_Chi_Minh for Vietnam)
DB_TIMEZONE=Asia/Ho_Chi_Minh

# Enable SSL for database connection (should be 'true' in production)
DB_USE_SSL=false

# Allow public key retrieval for MySQL authentication
DB_ALLOW_PUBLIC_KEY_RETRIEVAL=true

# Maximum number of connections in the pool
DB_POOL_SIZE=10

# Minimum number of idle connections in the pool
DB_POOL_MIN_IDLE=5

# Maximum time (ms) to wait for a connection from the pool
DB_CONNECTION_TIMEOUT=30000

# Maximum time (ms) a connection can remain idle in the pool
DB_IDLE_TIMEOUT=600000

# Maximum lifetime (ms) of a connection in the pool
DB_MAX_LIFETIME=1800000

# Query to test database connection validity
DB_TEST_QUERY='SELECT 1'

# ==========================================
# JPA / HIBERNATE SETTINGS
# ==========================================

# Show SQL queries in logs (should be 'false' in production)
JPA_SHOW_SQL=false

# Hibernate dialect (MySQL8Dialect for MySQL 8+)
HIBERNATE_DIALECT=org.hibernate.dialect.MySQL8Dialect

# Add comments to generated SQL
HIBERNATE_SQL_COMMENTS=true

# Batch size for JDBC operations
HIBERNATE_BATCH_SIZE=20

# Optimize insert ordering for batching
HIBERNATE_ORDER_INSERTS=true

# Optimize update ordering for batching
HIBERNATE_ORDER_UPDATES=true

# ==========================================
# JWT (JSON WEB TOKEN) CONFIGURATION
# ==========================================

# JWT secret key for signing and verifying tokens (CHANGE THIS in production!)
# Minimum recommended length: 256 bits (32 characters)
# Generate a strong secret with: openssl rand -base64 32
JWT_SECRET=ChangeThisJWTSecretInProduction

# Access token expiration duration (ISO-8601 Duration format)
# Format: PT[hours]H[minutes]M[seconds]S
# Examples: PT15M (15 minutes), PT1H (1 hour)
# Recommended: Short-lived (5-15 minutes) for better security
JWT_ACCESS_EXPIRATION=PT10M

# Refresh token expiration duration (ISO-8601 Duration format)
# Format: P[days]D or PT[hours]H
# Examples: P7D (7 days), P30D (30 days)
# Recommended: Longer-lived (7-30 days) to avoid frequent re-authentication
JWT_REFRESH_EXPIRATION=P7D

# Reset password token expiration duration (ISO-8601 Duration format)
# Format: PT[hours]H[minutes]M
# Examples: PT15M (15 minutes), PT30M (30 minutes)
# Recommended: Short-lived (15-30 minutes) for security
JWT_RESET_PASSWORD_EXPIRATION=PT15M

# JWT issuer identifier (appears in 'iss' claim)
# Used to identify the system that issued the token
JWT_ISSUER=TAwatch-System

# ==========================================
# FLYWAY MIGRATION SETTINGS
# ==========================================

# Location of migration scripts
FLYWAY_LOCATIONS=classpath:db/migration

# ==========================================
# SWAGGER / OPENAPI
# ==========================================

# Path to OpenAPI documentation endpoint
SWAGGER_API_DOCS_PATH=/v3/api-docs

# Path to Swagger UI interface
SWAGGER_UI_PATH=/swagger-docs

# Enable OpenAPI documentation generation (should be 'false' in production)
SWAGGER_ENABLED=false

# Enable Swagger UI interface (should be 'false' in production)
SWAGGER_UI_ENABLED=false

# Sort operations by HTTP method (alpha, method)
SWAGGER_OPERATIONS_SORTER=method

# Sort tags alphabetically
SWAGGER_TAGS_SORTER=alpha

# Display request duration in Swagger UI
SWAGGER_DISPLAY_REQUEST_DURATION=true

# Show Spring Boot Actuator endpoints in Swagger UI (should be 'false' in production)
SWAGGER_SHOW_ACTUATOR=false

# ==========================================
# SPRING BOOT ACTUATOR
# ==========================================

# Comma-separated list of exposed actuator endpoints
ACTUATOR_EXPOSED_ENDPOINTS=health,info

# Base path for actuator endpoints
ACTUATOR_BASE_PATH=/actuator

# Show detailed health information (should be 'when-authorized' in production)
ACTUATOR_HEALTH_SHOW_DETAILS=when-authorized

# Show health component details (should be 'when-authorized' in production)
ACTUATOR_HEALTH_SHOW_COMPONENTS=when-authorized

# Enable database health check
ACTUATOR_HEALTH_DB=true

# Enable mail health check
ACTUATOR_HEALTH_MAIL=true

# ==========================================
# LOGGING CONFIGURATION
# ==========================================

# Root logger level (affects all logs unless overridden)
LOG_ROOT=INFO

# Application-specific logging level (DEBUG, INFO, WARN, ERROR)
LOG_APP_LEVEL=DEBUG

# Spring Web logging level
LOG_SPRING_WEB=DEBUG

# Hibernate SQL logging level
LOG_HIBERNATE_SQL=DEBUG

# Hibernate parameter binding logging (TRACE shows parameter values - WARNING: may expose sensitive data)
LOG_HIBERNATE_BIND=TRACE

# Flyway migration logging level
LOG_FLYWAY=DEBUG

# ==========================================
# NOTES FOR PRODUCTION DEPLOYMENT
# ==========================================
# 1. Change all passwords to strong, unique values
# 2. Change JWT_SECRET to a strong, random value (minimum 32 characters)
# 3. Set DB_USE_SSL=true
# 4. Set root logging levels to INFO or WARN
# 5. Consider disabling Hibernate parameter binding (LOG_HIBERNATE_BIND=OFF)
# 6. Use external secret management (Docker secrets, Kubernetes secrets, HashiCorp Vault)